{% extends 'base.html' %}

{% block title %}
    {# 动态设置页面标题 #}
    {% if object %}编辑专业{% else %}添加新专业{% endif %}
{% endblock %}

{% block content %}
<div class="container mt-4">

    {# 动态设置页面大标题 #}
    {# ✨ 关键修正：将 object.name 修改为 object.major_name ✨ #}
    <h1 class="h2">
        {% if object %}
            编辑专业：{{ object.major_name }}
        {% else %}
            添加新专业
        {% endif %}
    </h1>

    <hr>

    <form method="post" novalidate>
        {% csrf_token %}
        
        {# 使用 form.as_p 渲染表单，这是最佳实践 #}
        {{ form.as_p }}

        <div class="mt-3">
            <button type="submit" class="btn btn-success">
                {% if object %}
                    <i class="bi bi-check-circle"></i> 保存更改
                {% else %}
                    <i class="bi bi-plus-circle"></i> 创建专业
                {% endif %}
            </button>
            <a href="{% url 'departments:major-list' %}" class="btn btn-secondary">返回列表</a>
        </div>
    </form>
</div>
{% endblock %}